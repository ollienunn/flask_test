<!-- A minimal canvas-based Snake game. Arrow keys to move, Space to pause, R to restart. -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Snake — Secret</title>
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; display:flex; flex-direction:column; align-items:center; padding:24px; background:#f4f7f0; color:#0b3d2e; }
    #game { background:#0b3d2e; border-radius:8px; box-shadow:0 6px 18px rgba(0,0,0,.12); }
    .controls { margin-top:12px; display:flex; gap:8px; align-items:center; }
    .btn { padding:6px 10px; background:#9db89a; color:#052; border-radius:6px; text-decoration:none; }
    .score { font-weight:600; margin-left:8px; }
  </style>
</head>
<body>
  <h2>Snake — Secret Game</h2>
  <canvas id="game" width="400" height="400"></canvas>
  <div class="controls">
    <button id="btn-restart" class="btn">Restart (R)</button>
    <button id="btn-pause" class="btn">Pause (Space)</button>
    <div class="score">Score: <span id="score">0</span></div>
  </div>

<script>
(() => {
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');
  const size = 20; // grid cell size
  const cols = canvas.width / size;
  const rows = canvas.height / size;

  let snake = [{x: Math.floor(cols/2), y: Math.floor(rows/2)}];
  let dir = {x:1, y:0};
  let food = null;
  let running = true;
  let speed = 120; // ms per tick
  let score = 0;
  let loopId = null;

  function spawnFood(){
    while(true){
      const f = {x: Math.floor(Math.random()*cols), y: Math.floor(Math.random()*rows)};
      if (!snake.some(s => s.x===f.x && s.y===f.y)) { food = f; break; }
    }
  }

  function reset(){
    snake = [{x: Math.floor(cols/2), y: Math.floor(rows/2)}];
    dir = {x:1, y:0};
    score = 0;
    running = true;
    spawnFood();
    document.getElementById('score').textContent = score;
    restartLoop();
  }

  function restartLoop(){
    if (loopId) clearInterval(loopId);
    loopId = setInterval(tick, speed);
  }

  function tick(){
    if(!running) return;
    const head = {x: (snake[0].x + dir.x + cols) % cols, y: (snake[0].y + dir.y + rows) % rows};
    // collision with self
    if (snake.some(p => p.x===head.x && p.y===head.y)){
      running = false;
      clearInterval(loopId);
      draw();
      return;
    }
    snake.unshift(head);
    if (food && head.x===food.x && head.y===food.y){
      score += 1;
      document.getElementById('score').textContent = score;
      spawnFood();
    } else {
      snake.pop();
    }
    draw();
  }

  function draw(){
    // background
    ctx.fillStyle = '#cfe6d6';
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // food
    if (food) {
      ctx.fillStyle = '#ff5555';
      ctx.fillRect(food.x*size+2, food.y*size+2, size-4, size-4);
    }

    // snake
    ctx.fillStyle = '#073b2e';
    snake.forEach((s,i) => {
      const pad = i===0 ? 1 : 3;
      ctx.fillRect(s.x*size+pad, s.y*size+pad, size - pad*2, size - pad*2);
    });

    if (!running){
      ctx.fillStyle = 'rgba(0,0,0,0.5)';
      ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.fillStyle = '#fff';
      ctx.font = '20px system-ui, Arial';
      ctx.textAlign = 'center';
      ctx.fillText('Game over — press R to restart', canvas.width/2, canvas.height/2);
    }
  }

  window.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowUp' && dir.y===0){ dir = {x:0,y:-1}; }
    if (e.key === 'ArrowDown' && dir.y===0){ dir = {x:0,y:1}; }
    if (e.key === 'ArrowLeft' && dir.x===0){ dir = {x:-1,y:0}; }
    if (e.key === 'ArrowRight' && dir.x===0){ dir = {x:1,y:0}; }
    if (e.key === ' '){ running = !running; if (running) restartLoop(); else clearInterval(loopId); e.preventDefault(); }
    if (e.key.toLowerCase() === 'r'){ reset(); }
  });

  document.getElementById('btn-restart').addEventListener('click', reset);
  document.getElementById('btn-pause').addEventListener('click', () => {
    running = !running;
    if (running) restartLoop(); else clearInterval(loopId);
  });

  // init
  spawnFood();
  restartLoop();
  draw();
})();
</script>
</body>
</html>