<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Order Success</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

  <!-- PWA: manifest, favicon and theme colour -->
  <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
  <link rel="icon" href="{{ url_for('static', filename='images/logo.png') }}" type="image/png">
  <meta name="theme-color" content="#0b3d2e">

</head>
<body>
  {% include 'navbar.html' %}
  <div class="container py-4">
    <h3>Order placed</h3>
    <p>Order #{{ order.id }} — placed at {{ order.created_at }} — status: {{ order.status }}</p>
    <h5>Items</h5>
    <ul class="list-group mb-3">
      {% for it in items %}
      <li class="list-group-item d-flex justify-content-between">
        <div>{{ it["name"] }} × {{ it["quantity"] }}</div>
        <div>${{ "{:,.2f}".format(it["unit_price"] * it["quantity"]) }}</div>
      </li>
      {% endfor %}
    </ul>
    <a href="{{ url_for('products') }}" class="btn btn-primary">Continue shopping</a>
  </div>
</body>

<footer>
  <div class="container">
    &copy; {{ 2025 }} Webstore — MachZero.
  </div>
</footer>

<script>
  // read ?selected=... and highlight + scroll that product into view
  document.addEventListener('DOMContentLoaded', function () {
    const params = new URLSearchParams(window.location.search);
    const selected = params.get('selected');
    if (!selected) return;
    const el = document.getElementById('product-' + selected);
    if (!el) return;
    // small delay so page renders then perform smooth scroll + highlight
    setTimeout(function () {
      el.classList.add('product-highlight');
      el.scrollIntoView({ behavior: 'smooth', block: 'center' });
      // ensure pronounced focus for keyboard users
      el.setAttribute('tabindex', '-1');
      el.focus({ preventScroll: true });
    }, 180);
  });
</script>

</html>